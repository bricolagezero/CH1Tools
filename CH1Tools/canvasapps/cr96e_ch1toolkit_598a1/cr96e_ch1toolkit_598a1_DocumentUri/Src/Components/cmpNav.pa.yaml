# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
ComponentDefinitions:
  cmpNav:
    DefinitionType: CanvasComponent
    AccessAppScope: true
    CustomProperties:
      OnNavigate:
        PropertyKind: Action
        DisplayName: OnNavigate
        Description: A custom property
        ReturnType: None
        Parameters:
          - key:
              Description: A parameter
              IsOptional: true
              DataType: Text
              Default: ="Text"
      SelectedKey:
        PropertyKind: Output
        DisplayName: SelectedKey
        Description: A custom property
        DataType: Text
    Properties:
      Fill: =RGBA(255, 255, 255, 1)
      Height: =750
      OnNavigate: |+
        =Switch(
            key,
            "Launch Pad", Navigate(LaunchPad, ScreenTransition.Fade),
            "Brain Stash", Navigate(BrainStash, ScreenTransition.Fade),
            "The Pantry", Navigate(ThePantry, ScreenTransition.Fade)
        )
      SelectedKey: =varMenuKey
      Width: =250
    Children:
      - Gallery2:
          Control: Gallery@2.15.0
          Variant: BrowseLayout_Vertical_OneTextVariant_ver5.0
          Properties:
            Height: =336
            Items: =MenuItemses
            OnSelect: |
              =// This is inside cmpNav's gallery
              Set(varMenuKey, ThisItem.ScreenName);
              cmpNav.OnNavigate(ThisItem.ScreenName);

              // Optional: Add breadcrumb (only if colBreadcrumbs is global)
              With(
                  {
                      newID: CountRows(colBreadcrumbs) + 1,
                      scr: Switch(
                              ThisItem.ScreenName,
                              "Launch Pad", LaunchPad,
                              "Brain Stash", BrainStash,
                              "The Pantry", ThePantry
                          )
                  },
                  RemoveIf(colBreadcrumbs, ID >= newID);
                  Collect(colBreadcrumbs, { ID: newID, Title: ThisItem.Title, Screen: scr })
              )
            TemplateSize: =55
            Transition: =Transition.Pop
            Width: =250
            Y: =374
          Children:
            - Title5:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Color: =RGBA(122, 138, 143, 1)
                  Fill: =RGBA(214, 221, 224, 1)
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                  Height: =38
                  OnSelect: =Select(Parent)
                  Size: =14
                  Text: =ThisItem.Title
                  Width: =172
                  X: =16
                  Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            - NextArrow2:
                Control: Classic/Icon@2.5.0
                Properties:
                  AccessibleLabel: =Self.Tooltip
                  Color: =RGBA(166, 166, 166, 1)
                  Height: =50
                  Icon: =Icon.ChevronRight
                  OnSelect: =Select(Parent)
                  PaddingBottom: =12
                  PaddingLeft: =12
                  PaddingRight: =12
                  PaddingTop: =12
                  Tooltip: ="View item details"
                  Width: =50
                  X: =Parent.TemplateWidth - Self.Width - 12
                  Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
      - Container9_3:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Height: =311
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.Center
            Width: =250
            Y: =20
          Children:
            - Container10_6:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  LayoutMinHeight: =50
                  Width: =Parent.Width
                Children:
                  - Image1_3:
                      Control: Image@2.2.3
                      Properties:
                        Height: =98
                        Image: =LookUp(MenuItemses, ScreenName = App.ActiveScreen.Name).Image
                        Width: =133
                        X: =60
                        Y: =5
            - Container10_7:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.SetByContainer
                  FillPortions: =0
                  LayoutMinHeight: =50
                  Width: =Parent.Width
                Children:
                  - Label2_3:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        Height: =200
                        Text: |-
                          =Coalesce(
                              LookUp(MenuItemses, ScreenName = App.ActiveScreen.Name).Description,
                              ""
                          )
                        Width: =Parent.Width
